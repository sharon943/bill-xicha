webpackJsonp([1],{0:function(t,e){},"2Ge7":function(t,e){},DQCz:function(t,e){},F0Yv:function(t,e,o){t.exports=o.p+"static/img/left.bcd8a5a.png"},Gvv4:function(t,e,o){t.exports=o.p+"static/img/user.6f785ad.png"},Jfpb:function(t,e,o){t.exports=o.p+"static/img/pwd.3535e68.png"},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("tvR6");var s,i,n,a=o("qBF2"),r=o.n(a),c=o("7+uW"),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},l=o("VU/8")({name:"app"},d,!1,function(t){o("Zcq2")},null,null).exports,h=o("/ocq"),p={openId:"",cardId:"",storeId:"4617",API:"https://api.v-ka.com"},u=o("VU/8")(p,null,!1,null,null,null).exports,m={name:"index",data:function(){return{code:"",mess:""}},computed:{},created:function(){this.storeId=u.storeId,this.request()},methods:{request:function(){var t=encodeURIComponent(u.API+"/bill/index.html#/heytea");this.$http.get(u.API+"/webapi/v1/weixin/codeByOnlyOpenId/"+t+"/"+this.storeId+"?scope=snsapi_userinfo",{mode:"cors"}).then(function(t){console.log(213),console.log(t);var e=t.body.oauth_url;console.log(t.body),console.log(t.bodyText),console.log(e),location.href=e}).catch(function(t){console.log(123),console.log(t)})},request2:function(){this.$router.push({name:"heytea"})}}},v={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},g=o("VU/8")(m,v,!1,function(t){o("NUQ9")},"data-v-103f5ccf",null).exports,f={name:"heytea",data:function(){return{mess:"",address:"深圳益田广场",time:"下午茶",city:"广州、深圳",tea:"满杯红柚",times:456,mostStore:"",openId:"oTUIstzWnOqIAuMbWqcSIu2lMQRo",ImageUrl:"",storeId:"",cardId:"",vshow:!1}},created:function(){console.log(this.$route.query.cardId),this.storeId=u.storeId},mounted:function(){this.one()},methods:{getImg:function(){html2canvas(document.querySelector("#app"),{allowTaint:!0,taintTest:!1,onrendered:function(t){console.log("runImg"),t.id="mycanvas";var e=t.toDataURL();s=e}})},getUrlParam:function(t){var e=location.search,o="",s=!1;if(0==e.indexOf("?")&&e.indexOf("=")>1)for(var i=unescape(e).substring(1,e.length).split("&"),n=0;n<i.length&&!s;)i[n].indexOf("=")>0&&i[n].split("=")[0].toLowerCase()==t.toLowerCase()&&(o=i[n].split("=")[1],s=!0),n++;return""==o&&(o=null),o},one:function(){if(void 0==u.openId||""==u.openId||null==u.openId){var t=this.getUrlParam("code"),e=this.getUrlParam("appid"),o=this.storeId;console.log("appid:"+e),console.log("code:"+t);var s=u.API+"/webapi/v1/weixin/weixin_user/"+e+"/"+t+"/"+o;console.log("url:"+s);var a=new Headers;a.append("Content-Type","application/json"),this.$http.get(s,{mode:"cors",headers:a}).then(function(t){console.log(t.body),console.log(t.body.openId),i=t.body.openId,u.openId=i,console.log(i),console.log(n),0==t.body.data.length?(console.log(7587457865468548),this.$router.push({name:"heytealogin",query:{openId:t.body.openId}})):(console.log(2324234324),n=t.body.data[0].card.id,u.cardId=n,console.log(n),this.getdata())}).catch(function(t){console.log(123),console.log(t)})}else void 0==u.cardId||null==u.cardId||""==u.cardId?(console.log(u.cardId+"11111"),this.$router.push({name:"heytealogin",query:{openId:u.openId}})):(i=u.openId,n=u.cardId,this.getdata())},shareImg:function(){var t=document.createElement("img");t.src=s,t.id="shareImg123",t.style="background:white;",document.querySelector(".bgbox").innerHTML="",document.querySelector("#app").appendChild(t),this.downloadIamge("#shareImg123","年度账单")},getdata:function(){var t=this;console.log(i,n);var e={storeId:this.storeId,cardId:n,openId:i};console.log(e);(new Headers).append("Content-Type","application/json"),fetch(u.API+"/openapi/v4_2/reportForms/getCardAnnualReport",{method:"POST",mode:"cors",headers:e}).then(function(t){return t.json()}).then(function(e){console.log(e),200==e.code?(t.vshow=!0,t.address=e.data.firstStoreName,t.mess=e.data.totalAmount,t.mostStore=e.data.mostStoreName,t.city=e.data.district,t.tea=e.data.mostProductName,t.times=e.data.mostProductNum,0==e.data.mostTime?t.time="早上":1==e.data.mostTime?t.time="上午":2==e.data.mostTime?t.time="下午":3==e.data.mostTime&&(t.time="晚上")):1012==e.code?(t.vshow=!0,t.mess=0):t.$router.push({name:"heytealogin",query:{openId:e.body.openId}})})},downloadIamge:function(t,e){var o=document.querySelector(t).src,s=document.createElement("a"),i=new MouseEvent("click");s.download=e||"年度账单",s.href=o,s.dispatchEvent(i)}}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.vshow,expression:"vshow"}],staticClass:"bgbox"},[this._m(0),this._v(" "),this.mess>0?e("section",{staticClass:"middle"},[e("img",{staticStyle:{position:"absolute",top:"50%",left:"25px",width:"75px",height:"100px"},attrs:{src:o("F0Yv"),alt:""}}),this._v(" "),e("img",{staticStyle:{position:"absolute",top:"25%",right:"10px",width:"100px",height:"80px"},attrs:{src:o("vC+O"),alt:""}}),this._v(" "),e("P",[this._v("在刚刚过去的2017年"),e("br"),this._v("你一共在喜茶消费了"),e("i",[this._v(this._s(this.mess))]),this._v("元")]),this._v(" "),e("P",[this._v("在 "),e("i",[this._v(" "+this._s(this.address))]),e("br"),this._v("你第一次踏上了喜茶星球")]),this._v(" "),e("P",[this._v("你最常在"),e("i",[this._v(this._s(this.mostStore))]),this._v("喝茶")]),this._v(" "),e("P",[this._v("更喜欢在"),e("i",[this._v(this._s(this.time))]),this._v("时段来杯喜茶"),e("br"),this._v("激发灵感")]),this._v(" "),e("p",[this._v("在这一年里"),e("br"),this._v("喝茶足迹遍布"),e("i",[this._v(this._s(this.city))]),this._v("等城市")]),this._v(" "),e("p",[this._v("你找到了自己最爱的那杯"),e("i",[this._v(this._s(this.tea))]),e("br"),this._v("(购买了"),e("i",[this._v(this._s(this.times))]),this._v("次)"),e("br"),this._v("也渐渐学会了掌握生活的节奏")]),this._v(" "),this._m(1),this._v(" "),e("p",[this._v("2018，愿我们一起变得更好")])],1):0==this.mess?e("section",{staticClass:"middle"},[e("img",{staticStyle:{position:"absolute",top:"50%",left:"25px",width:"75px",height:"100px"},attrs:{src:o("F0Yv"),alt:""}}),this._v(" "),e("img",{staticStyle:{position:"absolute",top:"25%",right:"10px",width:"100px",height:"80px"},attrs:{src:o("vC+O"),alt:""}}),this._v(" "),e("P",[this._v("2017，低调的你")]),e("p",[this._v("没有在喜茶星球留下痕迹")]),e("p",[this._v("2018，欢迎你来作客")])],1):this._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"top"},[e("img",{attrs:{src:o("rOIf"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("懂得享受现在"),e("br"),this._v("也开始憧憬未来")])}]},I=o("VU/8")(f,_,!1,function(t){o("DQCz")},"data-v-61644681",null).exports,y={name:"heytealogin",data:function(){return{code:"",mess:"",phone:"",pass:"",storeId:"4617",ruleForm2:{name:"",pass:"",checkPass:"",age:""}}},computed:{},created:function(){console.log(this.$route.query.openId),this.storeId=u.storeId},methods:{login:function(){var t=this,e=this.phone,o=this.storeId,s=this.pass,i=this.$route.query.openId;void 0!=i&&null!=i&&""!=i||(i=u.openId);var n={mobile:e,storeId:o,password:s,openId:i};console.log(JSON.stringify(n));var a=new Headers;a.append("Content-Type","application/json"),fetch(u.API+"/webapi/v1/card/activateToken",{method:"post",mode:"cors",headers:a,body:JSON.stringify(n)}).then(function(t){return t.json()}).then(function(e){console.log(e),"200"==e.code&&(u.cardId=e.cardId,t.$router.push({name:"heytea",query:{cardId:e.cardId}}))})}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg",staticStyle:{position:"relative","margin-top":"20%"}},[s("section",{staticClass:"user"},[s("img",{staticStyle:{width:"22%"},attrs:{src:o("Gvv4"),alt:""}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticStyle:{"border-bottom":"2px solid #1C1412"},attrs:{type:"tel","auto-complete":"off"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),s("section",{staticClass:"pwd",staticStyle:{top:"66%"}},[s("img",{staticStyle:{width:"22%"},attrs:{src:o("Jfpb"),alt:""}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticStyle:{"border-bottom":"2px solid #1C1412"},attrs:{type:"password","auto-complete":"off"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}})]),t._v(" "),s("img",{staticStyle:{position:"absolute",bottom:"-15%",left:"0",right:"0","margin-left":"auto","margin-right":"auto",width:"50%","z-index":"1"},attrs:{src:o("Zc4U")}}),t._v(" "),s("div",{staticStyle:{position:"absolute","z-index":"2",background:"transparent",bottom:"-15.5%",left:"0",right:"0","margin-left":"auto","margin-right":"auto",width:"49%",height:"25%"},on:{click:t.login}}),t._v(" "),s("p",{staticStyle:{display:"block",width:"80%",height:"30px","line-height":"30px","text-align":"center",position:"absolute",left:"0",right:"0","margin-left":"auto","margin-right":"auto",top:"125%","font-size":"13px",color:"black"}},[t._v("——VKA云会员提供技术服务——")])])},staticRenderFns:[]},x=o("VU/8")(y,b,!1,function(t){o("2Ge7")},"data-v-8db97158",null).exports;c.default.use(h.a),c.default.use(I),c.default.use(x);var w=new h.a({routes:[{path:"/",name:"index",component:g},{path:"/heytea",name:"heytea",component:I},{path:"/heytealogin",name:"heytealogin",component:x}]}),S=o("mtWM"),C=o.n(S),P=o("8+8L");c.default.prototype.$http=C.a,c.default.config.productionTip=!1,c.default.use(r.a),c.default.use(P.a),new c.default({el:"#app",router:w,template:"<App/>",components:{App:l}})},NUQ9:function(t,e){},Zc4U:function(t,e,o){t.exports=o.p+"static/img/login2.d5eec8c.png"},Zcq2:function(t,e){},rOIf:function(t,e,o){t.exports=o.p+"static/img/top.753ae2a.png"},tvR6:function(t,e){},"vC+O":function(t,e,o){t.exports=o.p+"static/img/right.0cb55d9.png"}},["NHnr"]);
//# sourceMappingURL=app.f968ad139e8154fc6311.js.map